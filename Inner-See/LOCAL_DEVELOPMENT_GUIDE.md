# 本地开发指南

## 🎯 项目概述
心探App是一个专业的心理测试应用，集成了1471道题目，支持6种测试类型，使用SQLite进行本地数据存储。

## 🚀 本地开发启动

### 1. 安装依赖
```bash
cd Inner-See
npm install
```

### 2. 启动Metro Bundler
```bash
npx expo start
```

### 3. 连接Android设备
1. 确保手机和电脑在同一WiFi网络
2. 打开手机上的Expo Go应用
3. 点击"Scan QR Code"扫描终端显示的二维码
4. 或者手动输入终端显示的URL

## 📱 测试功能

### 主要功能测试
1. **应用启动**：检查是否正常初始化SQLite数据库
2. **测试分类页面**：验证6个测试类型是否正确显示
3. **题目加载**：测试懒加载功能是否正常工作
4. **数据持久化**：验证用户答题记录是否正确保存

### 预期行为
- 应用启动时自动初始化SQLite数据库
- 测试分类页面显示6个测试类型：心理健康评估、人格特质分析、认知能力测试、职业发展评估、人际关系测评、生活质量评估
- 每个测试类型包含约50道题目（总计1471道）
- 支持分批加载，避免一次性加载所有题目

## 🔧 开发工具

### 数据库管理
- 使用SQLite进行本地数据存储
- 预打包数据库文件随应用分发
- 支持数据迁移和版本管理

### 代码结构
```
src/
├── database/          # 数据库相关
│   ├── PrepackagedDatabase.ts    # 预打包数据库管理
│   └── QuestionDataSeeder.ts     # 题目数据播种器
├── entities/          # 数据实体
│   ├── TestType.ts    # 测试类型实体
│   └── Question.ts    # 题目实体
├── services/          # 业务服务
│   └── LazyLoadingQuestionService.ts  # 懒加载题目服务
└── LazyLoadingAppInitializer.ts  # 懒加载应用初始化器
```

## 🐛 常见问题

### 1. 数据库连接失败
- 检查设备存储权限是否已授予
- 确认SQLite依赖包已正确安装

### 2. 题目加载缓慢
- 检查懒加载配置是否正确
- 验证分批加载逻辑是否生效

### 3. 数据丢失
- 确认数据库文件路径是否正确
- 检查数据备份和恢复机制

## 📊 测试数据
- 总题数：1471道
- 测试类型：6个
- 平均每个测试类型：约245道题目
- 支持的题型：量表题、单选题、多选题、逻辑题等

## 🎯 开发重点
1. **性能优化**：确保大量题目的流畅访问
2. **数据安全**：保护用户隐私和测试数据
3. **用户体验**：提供直观的测试流程和结果展示
4. **扩展性**：支持未来新增测试类型和题目

## 📞 支持
如遇到问题，请检查：
1. 依赖包版本是否兼容
2. 设备网络连接是否正常
3. Expo Go应用是否为最新版本