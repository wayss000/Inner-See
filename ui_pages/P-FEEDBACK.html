<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>心探 - 反馈建议</title>
    <script src="https://unpkg.byted-static.com/coze/space_ppt_lib/1.0.3-alpha.12/lib/tailwindcss.js"></script>
    <script src="https://unpkg.byted-static.com/fortawesome/fontawesome-free/6.7.2/js/all.min.js" data-auto-replace-svg="nest"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#6366f1',
                        secondary: '#8b5cf6',
                        tertiary: '#06b6d4',
                        accent: '#f59e0b',
                        glassBg: 'rgba(255, 255, 255, 0.1)',
                        glassBorder: 'rgba(255, 255, 255, 0.2)',
                        textPrimary: '#1f2937',
                        textSecondary: '#6b7280',
                        textLight: '#9ca3af'
                    },
                    backdropBlur: {
                        'xs': '2px',
                    },
                    boxShadow: {
                        'glass': '0 8px 32px 0 rgba(31, 38, 135, 0.37)',
                        'glass-inset': 'inset 0 1px 0 0 rgba(255, 255, 255, 0.05)',
                    }
                }
            }
        }
    </script>
    <style>
        .glass-effect {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.15);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.3);
        }
        
        .gradient-bg {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        
        .form-input {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            color: white;
        }
        
        .form-input:focus {
            outline: none;
            border-color: rgba(255, 255, 255, 0.4);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.1);
        }
        
        .form-input::placeholder {
            color: rgba(255, 255, 255, 0.6);
        }
        
        .submit-button {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
            transition: all 0.3s ease;
        }
        
        .submit-button:hover {
            transform: translateY(-1px);
            box-shadow: 0 8px 25px rgba(99, 102, 241, 0.4);
        }
        
        .submit-button:disabled {
            background: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .safe-top {
            padding-top: env(safe-area-inset-top);
        }
        
        .safe-bottom {
            padding-bottom: env(safe-area-inset-bottom);
        }
        
        .toast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 12px 24px;
            border-radius: 8px;
            z-index: 1000;
            opacity: 0;
            transition: opacity 0.3s ease;
        }
        
        .toast.show {
            opacity: 1;
        }
    </style>
</head>
<body class="gradient-bg">
    <!-- 状态栏模拟 -->
    <div id="status-bar" class="fixed top-0 left-0 right-0 h-11 bg-transparent flex justify-between items-center px-6 text-white text-sm font-medium z-50 safe-top">
        <div class="flex items-center space-x-1">
            <span>9:41</span>
        </div>
        <div class="flex items-center space-x-1">
            <i class="fas fa-signal text-xs"></i>
            <i class="fas fa-wifi text-xs"></i>
            <i class="fas fa-battery-three-quarters text-xs"></i>
        </div>
    </div>

    <!-- 主要内容区域 -->
    <div id="main-content" class="pt-11 pb-8 min-h-screen">
        <!-- 顶部导航栏 -->
        <header id="top-header" class="px-6 py-4">
            <div id="header-content" class="flex items-center">
                <button id="back-button" class="w-10 h-10 glass-effect rounded-full flex items-center justify-center mr-4">
                    <i class="fas fa-arrow-left text-white text-lg"></i>
                </button>
                <div id="header-title-section">
                    <h1 id="page-title" class="text-xl font-bold text-white">反馈建议</h1>
                    <p id="page-subtitle" class="text-sm text-white/80 mt-1">帮助我们做得更好</p>
                </div>
            </div>
        </header>

        <!-- 反馈表单区域 -->
        <section id="feedback-form-section" class="px-6">
            <div id="feedback-form-card" class="glass-card rounded-2xl p-6">
                <form id="feedback-form" class="space-y-6">
                    <!-- 反馈类型选择 -->
                    <div id="feedback-type-section" class="space-y-3">
                        <label id="feedback-type-label" class="block text-white font-medium text-base">反馈类型</label>
                        <div id="feedback-type-options" class="grid grid-cols-3 gap-3">
                            <button type="button" id="type-suggestion" class="feedback-type-btn form-input rounded-xl py-3 px-4 text-sm font-medium transition-all duration-300" data-type="建议">
                                <i class="fas fa-lightbulb mr-2"></i>建议
                            </button>
                            <button type="button" id="type-bug" class="feedback-type-btn form-input rounded-xl py-3 px-4 text-sm font-medium transition-all duration-300" data-type="问题">
                                <i class="fas fa-bug mr-2"></i>问题
                            </button>
                            <button type="button" id="type-other" class="feedback-type-btn form-input rounded-xl py-3 px-4 text-sm font-medium transition-all duration-300" data-type="其他">
                                <i class="fas fa-comment mr-2"></i>其他
                            </button>
                        </div>
                    </div>

                    <!-- 反馈内容输入 -->
                    <div id="feedback-content-section" class="space-y-3">
                        <label for="feedback-content" id="feedback-content-label" class="block text-white font-medium text-base">
                            反馈内容 <span class="text-red-400">*</span>
                        </label>
                        <textarea 
                            id="feedback-content" 
                            name="feedback-content" 
                            rows="6" 
                            class="form-input w-full rounded-xl p-4 text-base resize-none"
                            placeholder="请详细描述您的建议或遇到的问题，我们会认真对待每一条反馈..."
                            required
                        ></textarea>
                        <div id="content-counter" class="text-right">
                            <span id="content-count" class="text-white/60 text-sm">0</span>
                            <span class="text-white/60 text-sm">/500</span>
                        </div>
                    </div>

                    <!-- 联系方式输入 -->
                    <div id="contact-section" class="space-y-3">
                        <label for="contact-info" id="contact-info-label" class="block text-white font-medium text-base">
                            联系方式 <span class="text-white/60 text-sm">(可选)</span>
                        </label>
                        <input 
                            type="email" 
                            id="contact-info" 
                            name="contact-info" 
                            class="form-input w-full rounded-xl p-4 text-base"
                            placeholder="请输入您的邮箱地址，便于我们及时回复您"
                        >
                        <p id="contact-tip" class="text-white/60 text-sm">
                            <i class="fas fa-shield-alt mr-1"></i>
                            您的联系方式仅用于反馈回复，我们会严格保护您的隐私
                        </p>
                    </div>

                    <!-- 提交按钮 -->
                    <div id="submit-section" class="pt-4">
                        <button 
                            type="submit" 
                            id="submit-button" 
                            class="submit-button w-full rounded-xl py-4 text-white font-semibold text-base flex items-center justify-center"
                        >
                            <span id="submit-text">提交反馈</span>
                            <i id="submit-loading" class="fas fa-spinner fa-spin ml-2 hidden"></i>
                        </button>
                    </div>
                </form>
            </div>
        </section>

        <!-- 感谢提示 -->
        <section id="thank-you-section" class="px-6 mt-6">
            <div id="thank-you-card" class="glass-card rounded-2xl p-5 text-center">
                <div id="thank-you-icon" class="w-16 h-16 bg-gradient-to-br from-green-400 to-blue-500 rounded-full flex items-center justify-center mx-auto mb-3">
                    <i class="fas fa-heart text-white text-2xl"></i>
                </div>
                <h3 id="thank-you-title" class="text-white font-semibold text-base mb-2">感谢您的反馈</h3>
                <p id="thank-you-desc" class="text-white/80 text-sm">
                    您的每一条建议都是我们前进的动力，我们会认真考虑并持续改进产品体验
                </p>
            </div>
        </section>
    </div>

    <!-- 成功提示Toast -->
    <div id="success-toast" class="toast">
        <i class="fas fa-check-circle mr-2"></i>
        反馈提交成功，感谢您的建议！
    </div>

    <!-- 错误提示Toast -->
    <div id="error-toast" class="toast">
        <i class="fas fa-exclamation-circle mr-2"></i>
        提交失败，请稍后重试
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const backButton = document.querySelector('#back-button');
            const feedbackForm = document.querySelector('#feedback-form');
            const feedbackContent = document.querySelector('#feedback-content');
            const contentCount = document.querySelector('#content-count');
            const submitButton = document.querySelector('#submit-button');
            const submitText = document.querySelector('#submit-text');
            const submitLoading = document.querySelector('#submit-loading');
            const successToast = document.querySelector('#success-toast');
            const errorToast = document.querySelector('#error-toast');
            const feedbackTypeButtons = document.querySelectorAll('.feedback-type-btn');
            
            let selectedFeedbackType = '建议'; // 默认选择建议

            // 返回按钮点击事件
            backButton.addEventListener('click', function() {
                window.location.href = 'P-PERSONAL_CENTER.html';
            });

            // 反馈类型选择事件
            feedbackTypeButtons.forEach(button => {
                button.addEventListener('click', function() {
                    // 移除所有按钮的选中状态
                    feedbackTypeButtons.forEach(btn => {
                        btn.classList.remove('bg-white/20', 'border-white/40');
                        btn.classList.add('form-input');
                    });
                    
                    // 设置当前按钮为选中状态
                    this.classList.remove('form-input');
                    this.classList.add('bg-white/20', 'border-white/40');
                    
                    selectedFeedbackType = this.dataset.type;
                });
            });

            // 内容输入字符计数
            feedbackContent.addEventListener('input', function() {
                const length = this.value.length;
                contentCount.textContent = length;
                
                if (length > 500) {
                    contentCount.classList.add('text-red-400');
                    this.value = this.value.substring(0, 500);
                    contentCount.textContent = 500;
                } else {
                    contentCount.classList.remove('text-red-400');
                }
            });

            // 表单提交事件
            feedbackForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                const content = feedbackContent.value.trim();
                const contact = document.querySelector('#contact-info').value.trim();
                
                // 验证表单
                if (!content) {
                    showToast('请输入反馈内容', 'error');
                    return;
                }
                
                if (content.length < 10) {
                    showToast('反馈内容至少需要10个字符', 'error');
                    return;
                }
                
                // 显示加载状态
                setSubmitLoading(true);
                
                // 模拟提交过程
                setTimeout(() => {
                    // 重置表单
                    feedbackForm.reset();
                    contentCount.textContent = '0';
                    
                    // 重置反馈类型选择
                    feedbackTypeButtons.forEach(btn => {
                        btn.classList.remove('bg-white/20', 'border-white/40');
                        btn.classList.add('form-input');
                    });
                    document.querySelector('#type-suggestion').classList.remove('form-input');
                    document.querySelector('#type-suggestion').classList.add('bg-white/20', 'border-white/40');
                    selectedFeedbackType = '建议';
                    
                    // 显示成功提示
                    showToast('反馈提交成功，感谢您的建议！', 'success');
                    
                    // 恢复按钮状态
                    setSubmitLoading(false);
                    
                    console.log('反馈提交成功', {
                        type: selectedFeedbackType,
                        content: content,
                        contact: contact,
                        timestamp: new Date().toISOString()
                    });
                }, 2000);
            });

            // 设置提交按钮加载状态
            function setSubmitLoading(loading) {
                if (loading) {
                    submitButton.disabled = true;
                    submitText.textContent = '提交中...';
                    submitLoading.classList.remove('hidden');
                } else {
                    submitButton.disabled = false;
                    submitText.textContent = '提交反馈';
                    submitLoading.classList.add('hidden');
                }
            }

            // 显示提示信息
            function showToast(message, type = 'success') {
                const toast = type === 'success' ? successToast : errorToast;
                toast.innerHTML = `
                    <i class="fas fa-${type === 'success' ? 'check' : 'exclamation'}-circle mr-2"></i>
                    ${message}
                `;
                toast.classList.add('show');
                
                setTimeout(() => {
                    toast.classList.remove('show');
                }, 3000);
            }

            // 初始化默认选中状态
            document.querySelector('#type-suggestion').classList.remove('form-input');
            document.querySelector('#type-suggestion').classList.add('bg-white/20', 'border-white/40');
        });
    </script>
</body>
</html>